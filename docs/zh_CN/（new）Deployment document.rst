部署文档
========

前言
----

该文档将介绍如何部署一个拥有4个节点的Flato集群，操作步骤会较其他系统的部署稍繁琐一些，用户需要 **分别登录到4台服务器上** 进行操作。

这里假设4台服务器的IP分别为node1、node2、node3和node4，操作用户都是flato。

**该部署文档是为模拟平台上线部署的场景而编写的，所有的操作都只有普通用户权限，因此不涉及任何sudo权限的操作。不推荐使用root用户部署平台，容易养成不好的操作习惯，也不利于发现操作步骤中的错误。**

第一章 获取安装包以及用户登录
---------------------------

1. 获取安装包
^^^^^^^^^^^^

如果您已通过其他方式获取安装包请忽略此步骤。

【线下获取】对接趣链科技相关人员

【公司外部】登录飞洛官方资源库下载

Flato二进制包下载地址：https://filoop.com/console/binary

Flato证书签发地址：https://filoop.com/console/issue

Flato License签发地址：https://filoop.com/console/license

【公司内部】登录OA：https://moffi.hyperchain.cn

点击签发->平台组件->组件列表->flato->下载，选择使用您平台的flato版本下载

点击签发->证书->创建证书，选择V1.7+证书体系，按步骤点击后下载得到证书zip文件

点击签发->许可->我的许可，申请适合您需求的LICENSE，审批通过后在许可状态中下载LICENSE文件

至此，您已经获得了所有需要的安装包，注意：证书和LICENSE文件将在flato部署完成时用到，详见3.2节。


2. 创建使用用户及文件权限
3. 上传安装包
4. 登录操作用户
5. 重复操作

第二章 检查系统环境
------------------

1. 检查服务器时间
2. 检查服务器配置
3. 检查端口占用情况
4. 检查网络连通性

- 使用nt工具测试连通性
- 使用nc命令测试连通性
- 使用Python的HTTP模块测试连通性

5. 检查系统字符集
6. 重复操作

第三章 安装节点
--------------

1. 备份数据
2. 安装节点
3. 验证安装是否成功

第四章 检查、修改配置文件
-----------------------

1. 检查LICENSE文件
2. vi编辑器使用方法
3. 修改配置文件

- dynamic.toml
- ns_dynamic.toml
- ns_static.toml

4. 检查配置文件

- 各节点dynamic.toml
- 各节点ns_dynamic.toml

5. 检查证书配置

- 非分布式CA证书配置
- 分布式CA证书配置
- SOLO模式的证书说明
- 不启用证书功能

第五章 启动节点
--------------

1. 保存配置
2. 启动节点
3. 查看日志
4. 停止节点
5. 重启节点
6. 失败恢复





